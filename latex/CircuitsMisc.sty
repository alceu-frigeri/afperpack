%%%==============================================================================
%% Copyright 2025-present by Alceu Frigeri
%%
%% This work may be distributed and/or modified under the conditions of
%%
%% * The [LaTeX Project Public License](http://www.latex-project.org/lppl.txt),
%%   version 1.3c (or later), and/or
%% * The [GNU Affero General Public License](https://www.gnu.org/licenses/agpl-3.0.html),
%%   version 3 (or later)
%%
%% This work has the LPPL maintenance status *maintained*.
%%
%% The Current Maintainer of this work is Alceu Frigeri
%%
%% This is version {0.1} {2025/05/01}
%%
%% The list of files that compose this work can be found in the README.md file at
%% https://ctan.org/pkg/afperpack
%%
%%%==============================================================================
\NeedsTeXFormat{LaTeX2e}[2022/06/01]

\ProvidesPackage{CircuitsMisc}%
        [Circuits Miscelania repositories. Part of afperpack]

\defNewRepository{pss}

\defQuestion[pss]{Q1}{%
	\draw (0,0)  	\ncoord(ref) to[V,invert,l=\Vi] ++(0,2)   to [R,l=\Ra,v=\Va]  ++(2,0) \ncoord(A)  to [R,l=\Rb]  ++(2,0) \ncoord(B)
  (A) to[R,l=\Rc] ++(0,-2)
  (B) to[V,l=\Vy] ++(0,-2) \ncoord(nB)
  (ref) -- (nB)
  (B) -- ++(2.5,0)  node[ocirc]{} \ncoord(X)
  (nB) -- ++(2.5,0)  node[ocirc]{} \ncoord(Y)
  (X) to[open,v=\Vo] (Y)
	;
}

\defQuestion[pss]{Q2}{%
  \draw (0,0)  	\ncoord(refA) to[V,invert,l=\Va] ++(0,1.5)  \ncoord(A)
  (refA) -- ++(2.5,0) \ncoord(refB) to[V,invert,l=\Vb] ++(0,1.5)  \ncoord(B)
  (refB) -- ++(2.5,0) \ncoord(refC) to[V,invert,l=\Vc] ++(0,1.5)  \ncoord(C)
  (A) to [R,l=\Ra] ++(0,2) \ncoord(AA)
  (B) to [R,l=\Rb] ++(0,2) \ncoord(BB)
  (C) to [R,l=\Rc] ++(0,2) \ncoord(CC)
  (AA) to [R,l=\Rab] (BB)
  (BB) to [R,l=\Rbc] (CC) -- ++(0,1) \ncoord(Cx)
  (AA) -- ++(0,1) to [R,l=\Rac,i=\Iac] (Cx)
  ;
}


\defQuestion[pss]{Q3}{%
  \draw
  (0,0) node(gnd)[ground]{} \ncoord(A) to[V=\Vi,invert] ++(0,2) node(nB){}  -- ++(1,0) node[op amp,anchor=+](opampA){}
  (opampA.-) to[R=\Rb] ++(-2,0) node[ground]{}
  (opampA.out) node(nX){}
  (opampA.-) -- ++(0,1) node(nY){} to[R=\Rd] (nY -|  nX) -- (opampA.out)
  (opampA.out) -- ++(1,0) node[ocirc]{} \ncoord(X) node(nX){}
  to[open,v=\Vo] ++(0,-2) node[ocirc]{} node[ground]{}

  ;
}


\endinput
